(function(e){function n(n){for(var a,i,l=n[0],c=n[1],s=n[2],p=0,d=[];p<l.length;p++)i=l[p],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(n);while(d.length)d.shift()();return o.push.apply(o,s||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],a=!0,l=1;l<t.length;l++){var c=t[l];0!==r[c]&&(a=!1)}a&&(o.splice(n--,1),e=i(i.s=t[0]))}return e}var a={},r={app:0},o=[];function i(n){if(a[n])return a[n].exports;var t=a[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=a,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)i.d(t,a,function(n){return e[n]}.bind(null,a));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="/football-ranking/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=n,l=l.slice();for(var s=0;s<l.length;s++)n(l[s]);var u=c;o.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var a=t("7a23");function r(e,n,t,r,o,i){var l=Object(a["t"])("Homepage");return Object(a["o"])(),Object(a["e"])(l)}var o={class:"p-d-flex p-jc-between"},i=Object(a["h"])("h1",null,"Football Ranking",-1),l={class:"p-p-3"},c={class:"p-d-flex p-jc-between"},s={class:"p-input-icon-left"},u=Object(a["h"])("i",{class:"pi pi-search"},null,-1),p={class:"p-d-flex p-jc-between"},d={class:"p-input-icon-left"},f=Object(a["h"])("i",{class:"pi pi-search"},null,-1);function m(e,n,t,r,m,b){var g=Object(a["t"])("BlockUI"),h=Object(a["t"])("Button"),v=Object(a["t"])("InputText"),y=Object(a["t"])("Column"),j=Object(a["t"])("DataTable"),O=Object(a["t"])("TabPanel"),k=Object(a["t"])("TabView");return Object(a["o"])(),Object(a["g"])("div",null,[Object(a["k"])(g,{blocked:r.page_loading,fullScreen:!0},null,8,["blocked"]),Object(a["h"])("div",o,[i,Object(a["h"])("div",l,[Object(a["k"])(h,{label:"Refresh",onClick:n[0]||(n[0]=function(e){return r.refreshData()})})])]),Object(a["k"])(k,null,{default:Object(a["A"])((function(){return[Object(a["k"])(O,{header:"Ranking"},{default:Object(a["A"])((function(){return[Object(a["k"])(j,{value:r.ranking,responsiveLayout:"scroll",class:"p-datatable-sm p-datatable-customers",loading:r.python_loading,dataKey:"id",filters:r.filters1,"onUpdate:filters":n[3]||(n[3]=function(e){return r.filters1=e}),globalFilterFields:["name"]},{header:Object(a["A"])((function(){return[Object(a["h"])("div",c,[Object(a["k"])(h,{type:"button",icon:"pi pi-filter-slash",label:"Clear",class:"p-button-outlined",onClick:n[1]||(n[1]=function(e){return r.initFilters1()})}),Object(a["h"])("span",s,[u,Object(a["k"])(v,{modelValue:r.filters1["global"].value,"onUpdate:modelValue":n[2]||(n[2]=function(e){return r.filters1["global"].value=e}),placeholder:"Keyword Search"},null,8,["modelValue"])])])]})),default:Object(a["A"])((function(){return[Object(a["k"])(y,{field:"rank",header:"Rank"}),Object(a["k"])(y,{field:"name",header:"Team"})]})),_:1},8,["value","loading","filters"])]})),_:1}),Object(a["k"])(O,{header:"All Games"},{default:Object(a["A"])((function(){return[Object(a["k"])(j,{value:r.games,responsiveLayout:"scroll",class:"p-datatable-sm p-datatable-customers",loading:r.table_loading,dataKey:"id",filters:r.filters1,"onUpdate:filters":n[6]||(n[6]=function(e){return r.filters1=e}),globalFilterFields:["home_team","away_team"]},{header:Object(a["A"])((function(){return[Object(a["h"])("div",p,[Object(a["k"])(h,{type:"button",icon:"pi pi-filter-slash",label:"Clear",class:"p-button-outlined",onClick:n[4]||(n[4]=function(e){return r.initFilters1()})}),Object(a["h"])("span",d,[f,Object(a["k"])(v,{modelValue:r.filters1["global"].value,"onUpdate:modelValue":n[5]||(n[5]=function(e){return r.filters1["global"].value=e}),placeholder:"Keyword Search"},null,8,["modelValue"])])])]})),default:Object(a["A"])((function(){return[Object(a["k"])(y,{field:"home_team",header:"Home"}),Object(a["k"])(y,{field:"home_points",header:"Score"}),Object(a["k"])(y,{field:"away_points",header:"Score"}),Object(a["k"])(y,{field:"away_team",header:"Visitors"})]})),_:1},8,["value","loading","filters"])]})),_:1})]})),_:1})])}var b=t("3835"),g=t("1da1"),h=(t("d3b7"),t("e9c4"),t("a630"),t("3ca3"),t("4e82"),t("fb6a"),t("d81d"),t("96cf"),t("5b2c")),v=t("6f85"),y=t("bb57"),j=t("8398"),O=t("eeae"),k=t("c982"),w=t("a3e0"),_=t("0393");function x(){return S.apply(this,arguments)}function S(){return S=Object(g["a"])(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://thingproxy.freeboard.io/fetch/https://api.collegefootballdata.com/games?year=2021&seasonType=regular",{headers:{accept:"application/json",authorization:"Bearer NJRgktQC/FilkL37+s4ZSvckBKL/Iox5fw18DumOF+X8u2DntZqcJ44P9imkoG+t"},body:null,method:"GET",mode:"cors"});case 2:return n=e.sent,e.next=5,n.json();case 5:return t=e.sent,console.log("res",t),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}var P='import sys\nimport numpy as np\nimport scipy\nfrom scipy.linalg import svd\n# from scipy.linalg import null_space\n# import scipy.linalg.null_space\n\n# For Pyodide\nimport js\nfrom js import data\n\nprint(\'Python version\', sys.version)\nprint(\'scipy version: \', scipy.__version__)\n\n# Convert JSON array to python List\ndata = data.to_py()\n# print(data)\n\n# Custom null-space equation since scipy didn\'t have it until v1.1.0\n# https://github.com/scipy/scipy/blob/c3fd6d11aa1476f8d284c205fcf585c20a9f9ac5/scipy/linalg/decomp_svd.py#L333\ndef null_space(A, rcond=None):\n    u, s, vh = svd(A, full_matrices=True)\n    M, N = u.shape[0], vh.shape[1]\n    if rcond is None:\n        rcond = np.finfo(s.dtype).eps * max(M, N)\n    tol = np.amax(s) * rcond\n    num = np.sum(s > tol, dtype=int)\n    Q = vh[num:,:].T.conj()\n    return Q\n\n\n# Generate Teams list\nteams = []\nfor game in data:\n    if game["home_team"] not in teams:\n        teams.append(game["home_team"])\n\n    if game["away_team"] not in teams:\n        teams.append(game["away_team"])\n\nprint("Length", len(teams))\n\n# Generate game matrix\nM = np.zeros((len(teams), len(teams)), dtype=int)\nfor game in data:\n    i = teams.index(game["home_team"])\n    j = teams.index(game["away_team"])\n    M[i, j] = game["home_points"] if game["home_points"] != None else 0\n    M[j, i] = game["away_points"] if game["away_points"] != None else 0\n\n# Sum of the columns in 1D matrix\ncolsum = np.sum(M, axis=0)\n# Subtract games matrix with diagonal matrix of column sum\ndiff = M - np.diag(colsum)\n# compute null-space matrix of the difference\nranking_matrix = null_space(diff)\n# Convert to a python List\nranking = ranking_matrix.flatten().tolist()\n# Create dict and combine values of teams and ranking\nranking_dict = {}\nfor i, rank in enumerate(ranking):\n    ranking_dict[teams[i]] = rank \n\nprint(ranking_dict)\n# Sent to JS variable\njs.ranking = ranking_dict\n\n',T={components:{Button:y["a"],DataTable:h["a"],Column:v["a"],InputText:j["a"],TabView:O["a"],TabPanel:k["a"],BlockUI:w["a"]},setup:function(){var e=Object(a["q"])(!1),n=Object(a["q"])(!1),t=Object(a["q"])(!1),r=Object(a["q"])(null),o=Object(a["q"])(null),i=Object(a["q"])({global:{value:null,matchMode:_["a"].CONTAINS}});Object(a["n"])(Object(g["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.value=!0,console.log("asdf"),e.next=4,s();case 4:return e.next=6,p();case 6:f(),t.value=!1;case 8:case"end":return e.stop()}}),e)}))));var l=function(){i.value={global:{value:null,matchMode:_["a"].CONTAINS}}};function c(e){return new Promise((function(n,t){var a=!1,r=document.querySelector('script[src="'+e+'"]');if(r){if(r.hasAttribute("data-loaded"))return void n(r)}else r=document.createElement("script"),r.type="text/javascript",r.async=!0,r.src=e,a=!0;r.addEventListener("error",t),r.addEventListener("abort",t),r.addEventListener("load",(function(){r.setAttribute("data-loaded",!0),n(r)})),a&&document.head.appendChild(r)}))}function s(){return u.apply(this,arguments)}function u(){return u=Object(g["a"])(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.value=!0,n.next=3,x();case 3:t=n.sent,r.value=JSON.parse(JSON.stringify(t)),console.log(r),e.value=!1;case 7:case"end":return n.stop()}}),n)}))),u.apply(this,arguments)}function p(){return d.apply(this,arguments)}function d(){return d=Object(g["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.value=!0,t=!1,e.prev=2,!t){e.next=10;break}return a="http://localhost:8081/",window.languagePluginUrl="".concat(a),e.next=8,c("".concat(a,"pyodide.js"));case 8:e.next=13;break;case 10:return window.languagePluginUrl="https://cdn.jsdelivr.net/pyodide/v0.18.1/full/",e.next=13,c("https://cdn.jsdelivr.net/pyodide/v0.18.1/full/pyodide.js");case 13:return e.next=15,window.languagePluginLoader;case 15:return e.next=17,window.pyodide.loadPackage(["sympy","numpy","scipy"]);case 17:console.log("pyodide loaded"),e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](2),console.log("error",e.t0);case 23:n.value=!1;case 24:case"end":return e.stop()}}),e,null,[[2,20]])}))),d.apply(this,arguments)}function f(){n.value=!0,window.data=JSON.parse(JSON.stringify(r.value)),window.ranking=[],console.log("py:",window.pyodide.runPython(P));var e=window.ranking.toJs(),t=Array.from(e,(function(e){var n=Object(b["a"])(e,2),t=n[0],a=n[1];return{name:t,value:a}})),a=t.slice().sort((function(e,n){return n.value-e.value}));a.map((function(e){e.rank=a.indexOf(e)+1})),o.value=a,console.log(o.value),n.value=!1}return{table_loading:e,python_loading:n,page_loading:t,games:r,ranking:o,filters1:i,initFilters1:l,refreshData:s,initializePyodide:p,computeRanking:f}}},A=t("d959"),N=t.n(A);const C=N()(T,[["render",m]]);var R=C,M={name:"App",components:{Homepage:R}};t("6006");const L=N()(M,[["render",r]]);var F=L,J=t("9319"),q=(t("7aee"),t("e1ae"),t("4121"),t("bddf"),Object(a["d"])(F));q.use(J["a"],{ripple:!0,outlined:!1}),q.mount("#app")},6006:function(e,n,t){"use strict";t("a27f")},a27f:function(e,n,t){}});
//# sourceMappingURL=app.486e1237.js.map